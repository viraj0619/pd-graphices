<%- include('navbar.ejs') %>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  .scrollable-table {
    max-height: 400px;
    overflow-y: auto;
  }

  .scrollable-table table {
    margin-bottom: 0;
  }

  .scrollable-table thead th {
    position: sticky;
    top: 0;
    background: #212529; /* same as table-dark */
    color: #fff;
    z-index: 1;
  }
</style>

<section class="py-5">
  <div class="container">
    <div class="row g-4">
      <!-- Left Column: Add Category Form -->
      <div class="col-lg-6 col-md-12">
        <div class="p-4 border rounded shadow-sm bg-light">
          <h4 class="mb-3">Add New Category</h4>
          <form action="/admin/add_newCategory" method="POST" enctype="multipart/form-data">
            <div class="mb-3">
              <label for="category_name" class="form-label">Design Name</label>
              <input type="text" name="category_name" class="form-control" id="category_name" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">Add Category</button>
          </form>
        </div>
      </div>

      <!-- Right Column: Display Category Table -->
      <div class="col-lg-6 col-md-12">
        <div class="p-4 border rounded shadow-sm bg-white">
          <h4 class="mb-3">Category List</h4>
          <div class="scrollable-table">
            <table class="table table-bordered table-hover text-center align-middle">
              <thead class="table-dark">
                <tr>
                  <th>#</th>
                  <th>Action</th>
                  <th>Category Name</th>
                </tr>
              </thead>
              <tbody>
                <% if (categoryList && categoryList.length > 0) { %>
                  <% categoryList.forEach((category, index) => { %>
                    <tr>
                      <td><%= index + 1 %></td>
                      <td><a href="/admin/delete_category/<%=category.category_id%>" onclick="return confirm('Delete this Category')"><i class="fa fa-trash text-danger"></a></i></td>
                      <td><%= category.category_name %></td>
                    </tr>
                  <% }) %>
                <% } else { %>
                  <tr>
                    <td colspan="2">No categories found.</td>
                  </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<%- include('footer.ejs') %>
