
<%- include('navbar.ejs') %>

<!-- Form Page Content -->
<section class="form-group">
  <div class="container ">
    <div class="form-wrapper shadow">
      <h2>Add New File</h2>
      <form action="/admin/add_file" method="POST" enctype="multipart/form-data">
        <div class="form-group">
          <label for="image">File Image</label>
          <input type="file" name="file_img" accept="image/*">
        </div>

        <div class="form-group">
          <label for="name">Design name</label>
          <input type="text" name="design_name" required>
        </div>

        <div class="form-group">
  <label for="design_name">Select Categories</label>
  <select name="category_name" id="category_name" required>
    <option value="" disabled selected>-- Select Category --</option>
    <%for(let i=0; i< categoryName.length;i++){%>
    <option value="<%=categoryName[i].category_name%>"><%=categoryName[i].category_name%></option>
    <%}%>
  </select>
</div>


        <div class="form-group">
          <label for="price">File Price (₹)</label>
          <input type="number" name="file_price" id="file_price" required>
        </div>

        <div class="form-group">
          <label for="file_dis">File Discount (%)</label>
          <input type="number" name="file_dis" id="file_dis" min="1" max="100" required>
        </div>

        <div class="form-group">
          <label for="final_price">Final Price (₹)</label>
          <input type="number" name="final_price" id="final_price" readonly required>
        </div>


        <div class="form-group">
          <label for="file_des">File Description</label>
          <textarea name="file_des" rows="2" required placeholder="10 to 20 words"></textarea>
        </div>

        <button type="submit" class="submit-btn">Add File</button>
      </form>
    </div>
  </div>
</section>

<%- include('footer.ejs') %>

<script>
  const priceInput = document.getElementById("file_price");
  const discountInput = document.getElementById("file_dis");
  const finalPriceInput = document.getElementById("final_price");

  function calculateFinalPrice() {
    const price = parseFloat(priceInput.value) || 0;
    const discount = parseFloat(discountInput.value) || 0;
    if (discount >= 1 && discount <= 100) {
      const discountAmount = (price * discount) / 100;
      finalPriceInput.value = Math.round(price - discountAmount);
    } else {
      finalPriceInput.value = price;
    }
  }

  priceInput.addEventListener("input", calculateFinalPrice);
  discountInput.addEventListener("input", calculateFinalPrice);
</script>